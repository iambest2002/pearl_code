{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["\r\n\r\n// Map the characters to escape to their escaped values. The list is derived\r\n// from http://www.cespedes.org/blog/85/how-to-escape-latex-special-characters\r\n\r\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\r\n\r\nvar defaultEscapes = {\r\n  \"{\": \"\\\\{\",\r\n  \"}\": \"\\\\}\",\r\n  \"\\\\\": \"\\\\textbackslash{}\",\r\n  \"#\": \"\\\\#\",\r\n  $: \"\\\\$\",\r\n  \"%\": \"\\\\%\",\r\n  \"&\": \"\\\\&\",\r\n  \"^\": \"\\\\textasciicircum{}\",\r\n  _: \"\\\\_\",\r\n  \"~\": \"\\\\textasciitilde{}\"\r\n};\r\nvar formatEscapes = {\r\n  \"\\u2013\": \"\\\\--\",\r\n  \"\\u2014\": \"\\\\---\",\r\n  \" \": \"~\",\r\n  \"\\t\": \"\\\\qquad{}\",\r\n  \"\\r\\n\": \"\\\\newline{}\",\r\n  \"\\n\": \"\\\\newline{}\"\r\n};\r\n\r\nvar defaultEscapeMapFn = function defaultEscapeMapFn(defaultEscapes, formatEscapes) {\r\n  return _extends({}, defaultEscapes, formatEscapes);\r\n};\r\n\r\n/**\r\n * Escape a string to be used in LaTeX documents.\r\n * @param {string} str the string to be escaped.\r\n * @param {boolean} params.preserveFormatting whether formatting escapes should\r\n *  be performed (default: false).\r\n * @param {function} params.escapeMapFn the function to modify the escape maps.\r\n * @return {string} the escaped string, ready to be used in LaTeX.\r\n */\r\nmodule.exports = function (str) {\r\n  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\r\n      _ref$preserveFormatti = _ref.preserveFormatting,\r\n      preserveFormatting = _ref$preserveFormatti === undefined ? false : _ref$preserveFormatti,\r\n      _ref$escapeMapFn = _ref.escapeMapFn,\r\n      escapeMapFn = _ref$escapeMapFn === undefined ? defaultEscapeMapFn : _ref$escapeMapFn;\r\n\r\n  var runningStr = String(str);\r\n  var result = \"\";\r\n\r\n  var escapes = escapeMapFn(_extends({}, defaultEscapes), preserveFormatting ? _extends({}, formatEscapes) : {});\r\n  var escapeKeys = Object.keys(escapes); // as it is reused later on\r\n\r\n  // Algorithm: Go through the string character by character, if it matches\r\n  // with one of the special characters then we'll replace it with the escaped\r\n  // version.\r\n\r\n  var _loop = function _loop() {\r\n    var specialCharFound = false;\r\n    escapeKeys.forEach(function (key, index) {\r\n      if (specialCharFound) {\r\n        return;\r\n      }\r\n      if (runningStr.length >= key.length && runningStr.slice(0, key.length) === key) {\r\n        result += escapes[escapeKeys[index]];\r\n        runningStr = runningStr.slice(key.length, runningStr.length);\r\n        specialCharFound = true;\r\n      }\r\n    });\r\n    if (!specialCharFound) {\r\n      result += runningStr.slice(0, 1);\r\n      runningStr = runningStr.slice(1, runningStr.length);\r\n    }\r\n  };\r\n\r\n  while (runningStr) {\r\n    _loop();\r\n  }\r\n  return result;\r\n};"]}